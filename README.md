# 视频自动Canny边缘检测

*代码很简单，故而暂时不写UI了，直接用吧。*

### 简介

​    本程序可以根据画面自动调节Canny边缘检测的**minVal**和**maxVal**，故而达到自动将输入视频转为Canny边缘检测后视频的效果。同时，本程序支持为线稿添加背景，将背景视频输入给程序后，程序会自动循环背景并将线稿绘制在背景上。建议背景颜色均匀且较浅，以提升观感。输出采用H264编码，故需要添加OpenH264进行使用。

### 使用指南

1. 本代码需要配置全局的FFmpeg，相关配置方法在网上有很多，故而不赘述。

2. 本代码需要`openh264-1.8.0-win64.dll`才能对视频进行编码 *Download link : http://ciscobinary.openh264.org/openh264-1.8.0-win64.dll.bz2*

3. 除此以外的依赖只有 `OpenCV-python` 。

4. `bg_loop.mp4` 是背景视频的示例，建议背景视频都做成浅色、循环的样式，使得观感提升。

5. 运行时会短暂建立 `'.\\_Temp.mp4'` 和`'.\\Temp.mp4'` 请保证文件目录下没有同名文件，防止错误覆盖或删除。

6. 函数调用方法如下

   ```python
   canny_cvt(输出视频路径,输出视频路径,循环播放的背景视频路径(纯白背景填None),输出视频比特率(以M为单位,不更改比特率填None))
   ```

7. 输出视频默认比特率较大，故而文件较大，可以选择适和的比特率(5左右的整数)

### 其他

​    希望大家可以用这个程序制作出更多的优秀作品。


|   SFKgroup |
| ---------: |
| 2023.06.11 |

